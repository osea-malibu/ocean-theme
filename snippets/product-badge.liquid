{% comment %}
    Renders a list of product's price (regular, sale)

    Accepts:
    - product: {Object} Product Liquid object
    - classes: {Object} Tailwind CSS classes

    Usage:
    {% render 'product-badge', product: product %}
{% endcomment %}
{%- liquid
  assign badge_text = ''
  assign badge_class = ''

  if product.available == false
    assign badge_text = 'Out of Stock'
  elsif product.tags contains 'badge::new'
    assign badge_text = 'New'
  elsif product.tags contains 'badge::editor_pick'
    assign badge_text = "Editor's Pick"
  else
    for tag in product.tags
      if tag contains 'badge::'
        assign string_array = tag | split: '::'
        assign badge_text = string_array[1]
      endif
    endfor
  endif

  if product.available == false
    assign badge_class = 'bg-wave-200 text-wave-800'
  elsif product.metafields.custom.badge_classes != blank
    assign badge_class = product.metafields.custom.badge_classes
  endif
-%}

{%- if badge_text != '' -%}
  <div class="badge absolute top-1 right-1 mb-1 text-xs whitespace-nowrap overflow-hidden capitalize{% if badge_class != '' %} {{ badge_class }}{% endif %}{% if classes != nil %} {{ classes }}{% endif %}">
    {{ badge_text | replace: 'Best Seller', 'Bestseller' }}
  </div>
{%- endif -%}
