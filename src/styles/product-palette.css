/* =========================
   Product palette utilities
   Values come from CSS vars set on #main-product
   (surface/inverse/accent/core + text-on-*)
========================= */

/* Raw mappings (just color, no paired text) */
@utility bg-p-surface {
  --tw-bg-opacity: 1;
  background-color: color-mix(
    in oklab,
    var(--p-surface) calc(var(--tw-bg-opacity) * 100%),
    transparent
  );
}
@utility bg-p-core {
  --tw-bg-opacity: 1;
  background-color: color-mix(
    in oklab,
    var(--p-core) calc(var(--tw-bg-opacity) * 100%),
    transparent
  );
}
@utility bg-p-inverse {
  --tw-bg-opacity: 1;
  background-color: color-mix(
    in oklab,
    var(--p-inverse) calc(var(--tw-bg-opacity) * 100%),
    transparent
  );
}
@utility bg-p-accent {
  --tw-bg-opacity: 1;
  background-color: color-mix(
    in oklab,
    var(--p-accent) calc(var(--tw-bg-opacity) * 100%),
    transparent
  );
}

@utility text-p-surface {
  color: var(--p-surface);
}
@utility text-p-core {
  color: var(--p-core);
}
@utility text-p-inverse {
  color: var(--p-inverse);
}
@utility text-p-accent {
  color: var(--p-accent);
}

/* darken text for backgrounds */
@utility text-p-inverse-d1 {
  color: color-mix(in oklab, var(--p-inverse) 88%, black 12%);
}
@utility text-p-inverse-d2 {
  color: color-mix(in oklab, var(--p-inverse) 82%, black 24%);
}
@utility text-p-inverse-d3 {
  color: color-mix(in oklab, var(--p-inverse) 76%, black 36%);
}

@utility border-p-surface {
  border-color: var(--p-surface);
}
@utility border-p-core {
  border-color: var(--p-core);
}
@utility border-p-inverse {
  border-color: var(--p-inverse);
}
@utility border-p-accent {
  border-color: var(--p-accent);
}

@utility decoration-p-surface {
  -webkit-text-decoration-color: var(--p-surface);
  text-decoration-color: var(--p-surface);
}
@utility decoration-p-core {
  -webkit-text-decoration-color: var(--p-core);
  text-decoration-color: var(--p-core);
}
@utility decoration-p-inverse {
  -webkit-text-decoration-color: var(--p-inverse);
  text-decoration-color: var(--p-inverse);
}
@utility decoration-p-accent {
  -webkit-text-decoration-color: var(--p-accent);
  text-decoration-color: var(--p-accent);
}

/* Gradients (works with bg-gradient-to-*) */
@utility from-p-surface {
  --tw-gradient-from: var(--p-surface);
  --tw-gradient-to: color-mix(in oklab, var(--p-surface) 0%, transparent);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
}
@utility from-p-core {
  --tw-gradient-from: var(--p-core);
  --tw-gradient-to: color-mix(in oklab, var(--p-core) 0%, transparent);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
}
@utility to-p-core {
  --tw-gradient-to: var(--p-core);
}
@utility to-p-inverse {
  --tw-gradient-to: var(--p-inverse);
}
@utility to-p-accent {
  --tw-gradient-to: var(--p-accent);
}

/* Buttons */
@utility button-p-core {
  background-color: var(--p-core);
  border-color: var(--p-core);
  color: var(--text-seaweed-800);

  &:visited,
  &:active,
  &:focus,
  &:focus-visible,
  &:link {
    background-color: var(--p-core);
    border-color: var(--p-core);
    color: var(--text-seaweed-800);
  }

  &:hover {
    /* Slightly darker for hover */
    background-color: color-mix(in oklab, var(--p-core) 90%, black);
    border-color: color-mix(in oklab, var(--p-core) 90%, black);
    color: var(--text-seaweed-800);
  }
}

@utility button-p-accent {
  background-color: var(--p-accent);
  border-color: var(--p-accent);
  color: var(--text-seaweed-800);

  &:visited,
  &:active,
  &:focus,
  &:focus-visible,
  &:link {
    background-color: var(--p-accent);
    border-color: var(--p-accent);
    color: var(--text-seaweed-800);
  }

  &:hover {
    /* Slightly darker for hover */
    background-color: color-mix(in oklab, var(--p-accent) 90%, black);
    border-color: color-mix(in oklab, var(--p-accent) 90%, black);
    color: var(--text-seaweed-800);
  }
}
