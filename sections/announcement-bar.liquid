<div class="bg-seaweed-700 flex justify-center px-4">
  {%- if section.blocks.size > 1 -%}
    <div class="slider slider-nav-autoplay slider-nav-outside max-w-xl" data-slider-nav-autoplay-interval={{ section.settings.slide_interval | times: 1000 }}>
      <ul class="slider-container">
        {%- for block in section.blocks -%}
          {%- if block.settings.text != blank -%}
            <li class="text-white text-base font-weight-book text-center py-1 tracking-wider" role="region" aria-label="{{ block.settings.text | strip_html }}">
              {{ block.settings.text }}
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
      <button type="button" class="slider-nav slider-nav-small"></button>
      <button type="button" class="slider-nav slider-nav-small slider-nav-next"></button>
    </div>
  {%- else -%}
    <div class="text-white text-base font-weight-book text-center py-1 tracking-wider" role="region" aria-label="{{ section.blocks[0].settings.text | strip_html }}">
      {{ section.blocks[0].settings.text }}
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Announcement bar",
  "class": "inset-x-0 fixed top-0 z-30",
  "max_blocks": 12,
  "settings": [
    {
      "type": "paragraph",
      "content": "Adding more than 1 visible announcement converts text into a carousel. For best performance keep only 1 announcement active at a time."
    },
    {
      "default": 3,
      "id": "slide_interval",
      "info": "Number of seconds before slide changes when there is more than one announcement",
      "label": "Slide change interval",
      "max": 20,
      "min": 0,
      "step": 1,
      "type": "range",
      "unit": "sec"
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "Announcement",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Free shipping on orders over $50</p>",
          "label": "Text"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "announcement"
      }
    ]
  }
}
{% endschema %}
