{%- if section.settings.image_mobile != blank and section.settings.paragraph and section.settings.paragraph != blank -%}
  <div class="key-ingredients container mb-12 xl:max-w-screen-lg">
    <div class="relative overflow-hidden p-6 lg:p-8">
      <picture>
        {%- if section.settings.image_desktop != blank -%}
          <source
            srcset="{{ section.settings.image_desktop | image_url: width: 720 }} 1x, {{ section.settings.image_desktop | image_url: width: 1440 }} 2x"
            media="(min-width: 768px)"
          >
        {%- else -%}
          <source
            srcset="{{ section.settings.image_mobile | image_url: width: 720 }} 1x, {{ section.settings.image_mobile | image_url: width: 1440 }} 2x,"
            media="(min-width: 768px)"
          >
        {%- endif -%}
        <source
          srcset="{{ section.settings.image_mobile | image_url: width: 400 }} 1x, {{ section.settings.image_mobile | image_url: width: 800 }} 2x"
          media="(min-width: 0px)"
        >
        <img 
          srcset="{{ section.settings.image_mobile | image_url: width: 400 }} 1x, {{ section.settings.image_mobile | image_url: width: 800 }} 2x"
          src="{{ section.settings.image_mobile | image_url: width: 800 }}"
          alt=""
          aria-hidden="true"
          height="{{ section.settings.image_mobile.height }}"
          width="{{ section.settings.image_mobile.width }}"
          class="block absolute z-0 top-0 left-0 min-w-full min-h-full object-cover"
          loading="lazy"
        >
      </picture>
      <h3 class="relative z-10 text-xl md:text-2xl tracking-wide font-medium mb-3 md:mb-4">{{ section.settings.header }}</h3>
      {%- if section.settings.paragraph and section.settings.paragraph != blank -%}
        <div class="relative z-10 text-sm md:text-base md:max-w-prose lg:max-w-2xl font-book">{{ section.settings.paragraph }}</div>
      {%- endif -%}
    </div>
  </div>
{%- else -%}
  <h3 class="sr-only">Key Ingredients</h3>
  <p class="sr-only">Formulated with vegan, non-toxic, sustainably harvested ingredients.</p>
{%- endif -%}

{% schema %}
{
  "name": "Key ingredients",
  "tag": "section",
  "settings": [
    {
      "type": "paragraph",
      "content": "This section is powered by the product metafields labeled 'Key ingredients'."
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Image (mobile)",
      "info": "Size: 800w x 800h. Connect data source 'Key ingredients: Image (mobile)'"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Image (desktop)",
      "info": "Size: 1440w x 500h. Connect data source 'Key ingredients: Image (desktop)'."
    },
    {
      "type": "text",
      "id": "header",
      "label": "Header",
      "default": "Key ingredients"
    },
    {
      "type": "text",
      "id": "paragraph",
      "label": "Paragraph",
      "info": "Connect data source 'Key ingredients: Text'"
    }
  ]
}
{% endschema %}
