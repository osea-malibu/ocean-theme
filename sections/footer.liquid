{% comment %}theme-check-disable UndefinedObject{% endcomment %}
<footer>
  {%- unless section.settings.hide_brand_icons -%}
    <div class="relative container lg:max-w-screen-lg pb-28 lg:pb-6">
      <div class="border-4 border-ridge bg-[length:100px]" style="background-image: url('https://cdn.shopify.com/s/files/1/1368/9993/files/90s-osea-teal-light.jpg?v=1708194364');">
        <ul class="mx-auto py-2 px-2 flex justify-between sm:max-w-lg lg:max-w-4xl">
          <li class="flex-1 text-center font-ninetiesHeadliner leading-none xs:leading-none lg:leading-none">
            {%- render 'icon-value', icon: 'clean-beauty', stroke_width: 3.5, aria_hidden: true, classes: "w-8 h-8 lg:w-10 lg:h-10 block mx-auto mb-1 overflow-visible drop-shadow-[2px_2px_2px_rgba(255,255,255,0.75)] text-black" -%}
            <span class="text-black text-shadow shadow-white"><span class="whitespace-nowrap">Clean Beauty</span> <br />Since 1996</span>
          </li>
          <li class="flex-1 text-center font-ninetiesHeadliner leading-none xs:leading-none lg:leading-none">
            {%- render 'icon-value', icon: 'vegan-cruelty-free', stroke_width: 3.5, aria_hidden: true, classes: "w-8 h-8 lg:w-10 lg:h-10 block mx-auto mb-1 overflow-visible drop-shadow-[2px_2px_2px_rgba(255,255,255,0.75)] text-black" -%}
            <span class="text-black text-shadow shadow-white">Vegan & <br /><span class="whitespace-nowrap">Cruelty-Free</span></span>
          </li>
          <li class="flex-1 text-center font-ninetiesHeadliner leading-none xs:leading-none lg:leading-none hidden sm:block">
            {%- render 'icon-value', icon: 'climate-neutral', stroke_width: 3.5, aria_hidden: true, classes: "w-8 h-8 lg:w-10 lg:h-10 block mx-auto mb-1 overflow-visible drop-shadow-[2px_2px_2px_rgba(255,255,255,0.75)] text-black" -%}
            <span class="text-black text-shadow shadow-white"><span class="whitespace-nowrap">Climate Neutral Certified</span> <br />+ Ocean Positive</span>
          </li>
          <li class="flex-1 text-center font-ninetiesHeadliner leading-none xs:leading-none lg:leading-none">
            {%- render 'icon-value', icon: 'california-made', stroke_width: 3.5, aria_hidden: true, classes: "w-8 h-8 lg:w-10 lg:h-10 block mx-auto mb-1 overflow-visible drop-shadow-[2px_2px_2px_rgba(255,255,255,0.75)] text-black" -%}
            <span class="text-black text-shadow shadow-white">Born in <br />California</span>
          </li>
          <li class="flex-1 text-center font-ninetiesHeadliner leading-none xs:leading-none lg:leading-none">
            {%- render 'icon-value', icon: 'mother-daughter-founded', stroke_width: 3.5, aria_hidden: true, classes: "w-8 h-8 lg:w-10 lg:h-10 block mx-auto mb-1 overflow-visible drop-shadow-[2px_2px_2px_rgba(255,255,255,0.75)] text-black" -%}
            <span class="text-black text-shadow shadow-white">Mother & <br /><span class="whitespace-nowrap">Daughter Founded</span></span>
          </li>
        </ul>
      </div>
    </div>
  {%- endunless -%}

  <div class="footer-main pt-32 lg:pt-8 pb-20 container lg:max-w-screen-lg">
    {%- if section.blocks.size > 0 -%}
      <div class="relative bg-[#FFC0F1] border-4 border-ridge mx-auto mb-4 pt-36 pb-8 lg:pt-6 lg:pb-0 px-6 lg:pl-12 flex justify-around">
        {% comment %} Menus {% endcomment %}
        {%- if section.blocks.size > 0 -%}
          {%- for block in section.blocks -%}
            {%- if block.type == 'link_list' -%}
              <div class="{{ block.settings.menu_classes }}" {{ block.shopify_attributes }}>
                {%- if block.settings.heading != blank -%}
                  <h2 class="font-ninetiesHeadliner text-2xl sm:text-3xl tracking-tight mb-2 text-black">{{- block.settings.heading | escape -}}</h2>
                {%- endif -%}

                {%- if block.settings.menu != blank and block.settings.heading != blank -%}
                  <ul class="footer-block__details-content list-unstyled">
                    {%- for link in block.settings.menu.links -%}
                      <li>
                        <a href="{{ link.url }}" class="block text-sm sm:text-base py-2 text-[blue] underline whitespace-nowrap{% if link.title contains 'mobile::' %} sm:hidden{% endif %} {% if link.title.size > 17 %}tracking-tight{% else %}tracking-wide{% endif %}">
                          {{- link.title | replace: "mobile::", "" -}} 
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              </div>
            {%- endif -%}
          {%- endfor -%}
        {%- endif -%}
        {%- if section.settings.newsletter_enable -%}
          <div class="absolute -top-56 left-1/2 -translate-x-1/2 w-full max-w-lg lg:px-0 lg:relative lg:-top-6 lg:left-0 lg:translate-x-0 lg:w-96">
            {% comment %} Newsletter form {% endcomment %}
            <div class="border-4 border-ridge bg-[#d7c2fb] px-4 md:px-6 py-6 flex flex-col justify-center mb-8 lg:mb-4 lg:-mt-8">
              {%- if section.settings.newsletter_heading != blank -%}
                <h2 class="text-center font-ninetiesHeadliner text-4xl tracking-tight text-retro-purple text-shadow-hard2 shadow-retro-pink-light uppercase">{{ section.settings.newsletter_heading | escape }}</h2>
              {%- endif -%}
              {%- if section.settings.newsletter_paragraph != blank -%}
                <p class="text-center text-md tracking-wide leading-none mb-4 text-black">{{ section.settings.newsletter_paragraph }}</p>
              {%- endif -%}
              {%- assign newsletter_tabs = "Email,Text" | split: "," -%}
              <tab-controller id="footer-newsletter-tabs">
                <ul aria-controls="footer-newsletter-tabs" role="tablist" class="flex justify-center button-group">
                  {%- for tab in newsletter_tabs -%}
                    <li
                      role="tab"
                      aria-controls="footer-tab-{{ forloop.index }}"
                      tabindex="0"
                      aria-selected="{% if forloop.first %}true{% else %}false{% endif %}"
                      class="button button-xs button-secondary px-3 sm:px-4{% if forloop.first %} bg-[darkgray] border-inset{% endif %}"
                    >
                      {{ tab }}
                    </li>
                  {%- endfor -%}
                </ul>

                <div class="relative mt-1.5">
                  <div class="skeleton z-0 w-full h-10 bg-wave-400 rounded-md"></div>
                  <div class="relative z-10 -mt-10 min-h-[40px]">
                    {%- for tab in newsletter_tabs -%}
                      <div id="footer-tab-{{ forloop.index }}" role="tabpanel" aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}">
                        {%- if tab == 'Email' -%}
                          <div class="klaviyo-email-form relative">
                            {% render 'icon-email',
                              aria_hidden: true,
                              classes: "h-6 w-6 text-seaweed-400 absolute top-2 left-3 z-10",
                              stroke_width: 2
                            %}
                            <div class="klaviyo-form-T3gN5Z"></div>
                          </div>
                        {%- else -%}
                          <div class="klaviyo-phone-form relative">
                            <div class="klaviyo-form-TA8JnT"></div>
                            <small class="block text-xs leading-none mt-1">*By providing your cell phone number and clicking “SUBSCRIBE” below, you are agreeing to receive recurring automated marketing text messages (e.g. cart reminders) at the phone number provided, which may be sent using an autodialer, from OSEA. The text messages may contain marketing content and will be sent in accordance with <a class="underline" href="https://oseamalibu.com/pages/sms-terms-of-service">OSEA’s Text Messaging Terms and Conditions</a> and the <a class="underline" href="https://oseamalibu.com/pages/privacy-policy">OSEA Privacy Policy</a>. Consent is not a condition of purchase. Msg & data rates may apply. Msg frequency varies. Reply HELP for help and STOP to cancel.</small>
                          </div>
                        {%- endif -%}
                      </div>
                    {%- endfor -%}
                  </div>
                </div>
              </tab-controller>
            </div>
            
            <div class="flex items-center justify-between gap-5 px-4 max-w-sm mx-auto lg:px-0 text-[#6737CE] relative -bottom-4 lg:bottom-0 lg:mb-4">
              {% render 'logo-climate-neutral', variant: 'vertical', classes: 'shrink-0' %}
              {% render 'logo-ocean-positive', variant: 'vertical', classes: 'shrink-0' %}
              {% render 'logo-leaping-bunny', classes: 'shrink-0' %}
              {% render 'logo-peta', classes: 'shrink-0' %}
            </div>
            
            {% comment %} Customer service {% endcomment %}
            <p class="text-sm text-center tracking-wide leading-none mb-2 hidden lg:block text-black">Customer Support: <a href="mailto:support@oseamalibu.com" class="link text-[blue]">support@oseamalibu.com</a></p>
            <p class="text-sm text-center tracking-tight hidden leading-none lg:block text-black">Skincare Studio: <a href="mailto:skincarestudio@oseamalibu.com" class="link text-[blue]">skincarestudio@oseamalibu.com</a></p>
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="container text-black">
      {% comment %} Social media icons {% endcomment %}
      {% render 'social-media-icons', classes: 'flex gap-8 items-center justify-center mb-4 text-black' %}

      {% comment %} Copyright {% endcomment %}
      <small class="block text-center tracking-wide leading-none">Copyright &copy; {{ 'now' | date: "%Y" }} OSEA International. All rights reserved.</small>
    </div>
  </div>
</footer>

{% javascript %}
  class LocalizationForm extends HTMLElement {
    constructor() {
      super();
      this.elements = {
        input: this.querySelector('input[name="locale_code"], input[name="country_code"]'),
        button: this.querySelector('button'),
        panel: this.querySelector('ul'),
      };
      this.elements.button.addEventListener('click', this.openSelector.bind(this));
      this.elements.button.addEventListener('focusout', this.closeSelector.bind(this));
      this.addEventListener('keyup', this.onContainerKeyUp.bind(this));

      this.querySelectorAll('a').forEach(item => item.addEventListener('click', this.onItemClick.bind(this)));
    }

    hidePanel() {
      this.elements.button.setAttribute('aria-expanded', 'false');
      this.elements.panel.setAttribute('hidden', true);
    }

    onContainerKeyUp(event) {
      if (event.code.toUpperCase() !== 'ESCAPE') return;

      this.hidePanel();
      this.elements.button.focus();
    }

    onItemClick(event) {
      event.preventDefault();
      const form = this.querySelector('form');
      this.elements.input.value = event.currentTarget.dataset.value;
      if (form) form.submit();
    }

    openSelector() {
      this.elements.button.focus();
      this.elements.panel.toggleAttribute('hidden');
      this.elements.button.setAttribute('aria-expanded', (this.elements.button.getAttribute('aria-expanded') === 'false').toString());
    }

    closeSelector(event) {
      const shouldClose = event.relatedTarget && event.relatedTarget.nodeName === 'BUTTON';
      if (event.relatedTarget === null || shouldClose) {
        this.hidePanel();
      }
    }
  }

  customElements.define('localization-form', LocalizationForm);
{% endjavascript %}

{% schema %}
{
  "name": "t:sections.footer.name",
  "blocks": [
    {
      "type": "link_list",
      "name": "t:sections.footer.blocks.link_list.name",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Quick links",
          "label": "t:sections.footer.blocks.link_list.settings.heading.label",
          "info": "t:sections.footer.blocks.link_list.settings.heading.info"
        },
        {
          "type": "link_list",
          "id": "menu",
          "default": "footer",
          "label": "t:sections.footer.blocks.link_list.settings.menu.label",
          "info": "t:sections.footer.blocks.link_list.settings.menu.info"
        },
        {
          "type": "textarea",
          "id": "menu_classes",
          "label": "Menu classes"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "checkbox",
      "id": "hide_brand_icons",
      "label": "Hide brand icons"
    },
    {
      "type": "link_list",
      "id": "legal_links",
      "label": "Legal links"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.header__1.content",
      "info": "t:sections.footer.settings.header__1.info"
    },
    {
      "type": "checkbox",
      "id": "newsletter_enable",
      "default": true,
      "label": "t:sections.footer.settings.newsletter_enable.label"
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "default": "Subscribe to our emails",
      "label": "t:sections.footer.settings.newsletter_heading.label"
    },
    {
      "type": "html",
      "id": "newsletter_paragraph",
      "default": "Get news and exclusive offers to your inbox",
      "label": "Newsletter subheader"
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "link_list"
      }
    ]
  }
}
{% endschema %}
